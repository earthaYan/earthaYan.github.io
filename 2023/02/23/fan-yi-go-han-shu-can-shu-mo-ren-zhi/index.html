<!DOCTYPE html>
<html lang="zh-CN">
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0,  viewport-fit=cover" name="viewport" />
    <meta name="description" content="ç¿»è¯‘-goå‡½æ•°å‚æ•°é»˜è®¤å€¼" />
    <meta name="hexo-theme-A4" content="v1.7.1" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.webp">
    <title>Diary | just try it</title>

    
        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
            
<link rel="stylesheet" href="/css/waline.css">

        
    
    
<link rel="stylesheet" href="/css/ui.css">
 
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>
    
    <body>
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    
<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/favicon.webp" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">Diary</a> 
            <span class="description">é»˜å¥¥æ²™</span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">é¦–é¡µ</a></li>
            
        
            
                <li><a href="/list/">æ–‡ç« </a></li>
            
        
            
                <li><a href="/categories/">åˆ†ç±»</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">

    
        <div class="post-main-title">
            ç¿»è¯‘-goå‡½æ•°å‚æ•°é»˜è®¤å€¼
        </div>
      
    

    <div class="post-md">
        
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#GloLang-%E5%B0%8F%E6%8A%80%E5%B7%A7%EF%BC%9A%E5%A6%82%E4%BD%95%E7%BB%99-Function-%E5%8F%82%E6%95%B0%E6%B7%BB%E5%8A%A0%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="post-toc-text">GloLang å°æŠ€å·§ï¼šå¦‚ä½•ç»™ Function å‚æ•°æ·»åŠ é»˜è®¤å€¼?</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E7%AE%80%E5%8D%95%E7%9A%84-wrapper"><span class="post-toc-text">ç®€å•çš„ wrapper</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E9%9A%90%E8%97%8F%E5%8F%82%E6%95%B0"><span class="post-toc-text">éšè—å‚æ•°</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Functional-options-pattern-%E5%8A%9F%E8%83%BD%E9%80%89%E9%A1%B9%E6%A8%A1%E5%BC%8F"><span class="post-toc-text">Functional options pattern åŠŸèƒ½é€‰é¡¹æ¨¡å¼</span></a></li></ol>
        
        <p>åŸæ–‡åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://medium.com/@func25/golang-secret-how-to-add-default-values-to-function-parameters-60bd1e9625dc">https://medium.com/@func25/golang-secret-how-to-add-default-values-to-function-parameters-60bd1e9625dc</a></p>
<h2 id="GloLang-å°æŠ€å·§ï¼šå¦‚ä½•ç»™-Function-å‚æ•°æ·»åŠ é»˜è®¤å€¼"><a href="#GloLang-å°æŠ€å·§ï¼šå¦‚ä½•ç»™-Function-å‚æ•°æ·»åŠ é»˜è®¤å€¼" class="headerlink" title="GloLang å°æŠ€å·§ï¼šå¦‚ä½•ç»™ Function å‚æ•°æ·»åŠ é»˜è®¤å€¼?"></a>GloLang å°æŠ€å·§ï¼šå¦‚ä½•ç»™ Function å‚æ•°æ·»åŠ é»˜è®¤å€¼?</h2><p><img src="https://cdn-images-1.medium.com/max/4044/1*7PBtpnlYoSLWJMSOliQweQ.png"></p>
<p>ä½ æ›¾ç»å› ä¸º Go æ²¡æœ‰é»˜è®¤å‚æ•°å€¼è€Œæ„Ÿåˆ°è‹¦æ¼å—?äº‹å®ä¸Šä½ ä¸æ˜¯å”¯ä¸€ä¸€ä¸ª!è¿™ç§çƒ¦äººçš„é™åˆ¶ä¼šè®©ä½ çš„ä»£ç å†™èµ·æ¥å•è°ƒä¹å‘³ï¼Œè¯»èµ·æ¥ä¹Ÿæ›´å›°éš¾ã€‚</p>
<p>ä¸€ç›´ä»¥æ¥,ä½ ä¸å¾—ä¸å†™é¢å¤–çš„ä»£ç æ¥æ£€æµ‹æŸä¸ªå‚æ•°æ˜¯å¦æœ‰è¢«æä¾›ï¼Œå¦‚æœæ²¡æœ‰çš„è¯è¦ä½¿ç”¨ä¸€ä¸ªé»˜è®¤å€¼èµ‹ç»™è¿™ä¸ªå‚æ•°ã€‚</p>
<p>åˆ«æ‹…å¿ƒ!ç°åœ¨å·²ç»æœ‰æ–¹æ³•æ¥é¿å¼€è¿™äº›é™åˆ¶å¹¶ä¸”èƒ½æ·»åŠ é»˜è®¤å€¼åˆ° Go Function é‡Œé¢ã€‚å½“ç„¶è‚¯å®šä¸ä¼šåƒå†…ç½®çš„æ–¹æ³•é‚£æ ·æ–¹ä¾¿,ä½†æ˜¯è‡³å°‘ä½ ä¸éœ€è¦ä¸€ç›´èƒŒè´Ÿç€é™åˆ¶ã€‚</p>
<p>Golang å°æŠ€å·§ç³»åˆ—:</p>
<ul>
<li><p>GloLang å°æŠ€å·§ï¼šå¦‚ä½•ç»™ Function å‚æ•°æ·»åŠ é»˜è®¤å€¼? (å½“å‰ç¯‡)</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://medium.com/@func25/golang-technique-custom-struct-tag-technique-in-go-8667bf7da457">GloLang å°æŠ€å·§: è‡ªå®šä¹‰ç»“æ„æ ‡ç­¾æ¯”å¦‚ <code>json:â€nameâ€</code></a></p>
</li>
</ul>
<h2 id="ç®€å•çš„-wrapper"><a href="#ç®€å•çš„-wrapper" class="headerlink" title="ç®€å•çš„ wrapper"></a>ç®€å•çš„ wrapper</h2><p>å®Œæˆè¿™ä»¶äº‹çš„æ–¹æ³•ä¹‹ä¸€å°±æ˜¯å®šä¹‰ä¸€ä¸ª wrapper å‡½æ•°,åœ¨è¿™ä¸ªå‡½æ•°é‡Œå°†é»˜è®¤å€¼ä½œä¸ºå‚æ•°è°ƒç”¨åŸå§‹å‡½æ•°ã€‚<br>å¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰æŒ‡æ˜ name,é»˜è®¤çš„ name å°±æ˜¯â€Aidenâ€â€ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ wrapper çš„æ¡ˆä¾‹ï¼š</p>
<pre><code class="go">    func greet(name string) string &#123;
     return &quot;Hello, &quot; + name
    &#125;

    func greetWithDefaultAiden(name string) string &#123;
     if name == &quot;&quot; &#123;
      name = &quot;Aiden&quot;
     &#125;
     return greet(name)
    &#125;

    // you can have more than 1 default set
    func greetWithDefaultJohn(name string) string &#123;
     if name == &quot;&quot; &#123;
      name = &quot;John&quot;
     &#125;
     return greet(name)
    &#125;
</code></pre>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥åœ¨ä¸ä¿®æ”¹ greet å‡½æ•°å†…éƒ¨çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œä¸º greet å‡½æ•°è®¾ç½®é»˜è®¤å‚æ•°å€¼ã€‚</p>
<blockquote>
<p>â€œä½†æ˜¯è¿™å¯¹äºä¸€ä¸ªç®€å•çš„å‡½æ•°æ¥è¯´æ˜¯ä¸æ˜¯å¤ªè‡ƒè‚¿äº†?â€</p>
</blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªä¸åˆ©ä¹‹å¤„ï¼Œå› ä¸ºå®ƒéœ€è¦ä½ å†™ä¸€äº›é¢å¤–çš„ä»£ç ï¼Œè¿™ä¼šè®©ä»£ç çš„å¯è¯»æ€§å˜å·®ã€‚</p>
<h2 id="éšè—å‚æ•°"><a href="#éšè—å‚æ•°" class="headerlink" title="éšè—å‚æ•°"></a>éšè—å‚æ•°</h2><p>æˆ‘ä»¬å¯ä»¥æŠŠå‡½æ•°çš„æƒ¨å‘¼æ”¾åœ¨ä¸€ä¸ªæœªå¯¼å‡ºçš„ struct ä¸­ï¼Œå…è®¸å®¢æˆ·ç«¯æŒ‰ç…§éœ€è¦åˆå§‹åŒ–è¿™äº›å‚æ•°ï¼š</p>
<pre><code class="go">  type greetingArguments struct &#123;
    Name string
    Age  int
  &#125;

  func GreetingArguments() greetingArguments &#123;
    return greetingArguments&#123;
    Name: &quot;Aiden&quot;,
    Age:  30,
    &#125;
  &#125;
</code></pre>
<p>ç°åœ¨å®šä¹‰ Greet å‡½æ•°:</p>
<pre><code class="go">    func Greet(options greetingArguments) string &#123;
      return &quot;Hello, my name is &quot; + options.Name + &quot; and I am &quot; + strconv.Itoa(options.Age) + &quot; years old.&quot;
    &#125;
</code></pre>
<p>æ¯æ¬¡å®¢æˆ·ç«¯æƒ³è¦ä½¿ç”¨ Greet å‡½æ•°çš„æ—¶å€™,ä»–ä»¬å°±å¿…é¡»ä½¿ç”¨ GreetingArguments()å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ª greetingArguments ç±»å‹çš„ structã€‚</p>
<p>è¿™ä¸ªæ–¹æ³•åªæœ‰åœ¨åœ¨ä»åŒ…å¤–è€Œä¸æ˜¯åŒ…å†…è°ƒç”¨å‡½æ•°æ—¶æœ‰æ•ˆã€‚</p>
<p>å¦å¤–ä¸€ä¸ªé€‰æ‹©å°±æ˜¯ä½¿ç”¨ functional options patternï¼Œå®ƒå¯ä»¥è®©ä½ å‘å‡½æ•°ä¼ é€’æ•°é‡å¯å˜çš„é€‰é¡¹ä½œä¸ºå‚æ•°ã€‚è¿™ä¸ªæ–¹æ³•æ›´çµæ´»ï¼Œä»£ç å¯è¯»æ€§ä¹Ÿæ›´å¥½ï¼Œä½†æ˜¯ä¹Ÿä¼šè®©ä½ çš„ä»£ç æ›´åŠ å¤æ‚ã€‚</p>
<h2 id="Functional-options-pattern-åŠŸèƒ½é€‰é¡¹æ¨¡å¼"><a href="#Functional-options-pattern-åŠŸèƒ½é€‰é¡¹æ¨¡å¼" class="headerlink" title="Functional options pattern åŠŸèƒ½é€‰é¡¹æ¨¡å¼"></a>Functional options pattern åŠŸèƒ½é€‰é¡¹æ¨¡å¼</h2><p>è¿™ä¸ªæ¨¡å¼å·²ç»è¢«å¾ˆå¤šåº“é‡‡ç”¨äº†ã€‚åœ¨æœ¬ç« èŠ‚ä¸­ï¼Œæˆ‘ä¼šä¸€æ­¥ä¸€æ­¥å¸¦ä½ ä½“éªŒå¦‚ä½•ä½¿ç”¨å®ƒï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ª struct,ä¿å­˜æœ‰ä¸¤ä¸ªå­—æ®µçš„å‚æ•°ï¼šName å’Œ ageã€‚</li>
</ol>
<pre><code class="go">type GreetingOptions struct &#123;
  Name string
  Age int
&#125;
</code></pre>
<ol start="2">
<li>ç°åœ¨é¡¶ä¸€ä¸ª Greet å‡½æ•°ï¼Œå°†æ–°çš„ struct ä½œä¸ºä¸€ä¸ªå‚æ•°:</li>
</ol>
<pre><code class="go">func Greet(options GreetingOptions) string &#123;
  return &quot;Hello, my name is &quot; + options.Name + &quot; and I am &quot; + strconv.Itoa(options.Age) + &quot; years old.&quot;
&#125;
</code></pre>
<ol start="3">
<li>ä¸º struct ä¸­çš„å­—æ®µå®šä¹‰åŠŸèƒ½é€‰é¡¹æ˜¯å¾ˆæœ‰è¶£çš„å†…å®¹:</li>
</ol>
<pre><code class="go">type GreetingOption func(*GreetingOptions)
func WithName(name string) GreetingOption &#123;
  return func(o *GreetingOptions) &#123;
    o.Name = name
  &#125;
&#125;
func WithAge(age int) GreetingOption &#123;
  return func(o *GreetingOptions) &#123;
    o.Age = age
  &#125;
&#125;
</code></pre>
<ol start="4">
<li>ä½¿ç”¨æ–°ç±»å‹<strong>GreetingOption</strong> åˆ›å»º wrapper:</li>
</ol>
<pre><code class="go">func GreetWithDefaultOptions(options ...GreetingOption) string &#123;
  opts := GreetingOptions&#123;
    Name: &quot;Aiden&quot;,
    Age: 30,
  &#125;
  for _, o := range options &#123;
    o(&amp;opts)
  &#125;
  return Greet(opts)
&#125;
</code></pre>
<p>GreetWithDefaultOptions å‡½æ•°ä¸º GreetingOptions struct çš„ Name(&#x3D; â€œAidenâ€)å’Œ Age (&#x3D; 30) å­—æ®µè®¾ç½®äº†é»˜è®¤å€¼ï¼Œç„¶åå°†ä½œä¸ºå‚æ•°ä¼ é€’çš„é€‰é¡¹åº”ç”¨åˆ°è¯¥ structã€‚</p>
<p>æœ€åï¼Œä½¿ç”¨ä¿®æ”¹åçš„ struct ä½œä¸ºå‚æ•°è°ƒç”¨ Greet å‡½æ•°</p>
<p>ä¸ºäº†ä½¿ç”¨è¿™æ®µä»£ç ï¼Œä½ å¯ä»¥è°ƒç”¨ä½¿ç”¨ä½ éœ€è¦çš„é€‰é¡¹è°ƒç”¨ GreetWithDefaultOptions å‡½æ•°ï¼š</p>
<pre><code class="go">  greeting := GreetWithDefaultOptions(WithName(&quot;Alice&quot;), WithAge(20))
  // &quot;Hello, my name is Alice and I am 20 years old.&quot;
</code></pre>
<p>è®¸å¤šåº“éƒ½ä½¿ç”¨äº† åŠŸèƒ½é€‰é¡¹æ¨¡å¼ï¼Œè¿™å…¶ä¸­åŒ…æ‹¬ mongodb, aws-sdk-go, gorm, cli å’Œè®¸å¤šå…¶ä»–çš„åº“</p>

    </div>

    <div class="post-meta">
        <i>
        
            <span>2023-02-23</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« Moon</span>
            
            
                <span>æ‰“ä¸Šæ ‡ç­¾:
                    
                    
                        <a href='/tags/GoLang/'>
                            GoLang
                        </a>
                    
                </span>
             
             
                <span>å½’ä¸ºåˆ†ç±»:
                    
                    
                        <a href='/categories/%E7%BF%BB%E8%AF%91/'>
                            ç¿»è¯‘
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    
        
    <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        ä»¥ä¸Šã€‚ 
    </div>
    
        

    <div id="waline"></div>
    <script type="module"  >
        import { init } from 'https://npm.elemecdn.com/hexo-theme-a4@latest/source/js/waline.mjs'; 
        function loadWaline() {
            init({
                el: '#waline',
                serverURL: 'https://comment-hexo-waline.vercel.app/',
                lang: 'zh-CN',
                dark: 'body[class~="dark-mode"]',
                requiredMeta: ['nick','mail'], // cannot customize by theme config, change it yourself
                search: false, // ç¦æ­¢è¡¨æƒ…åŒ…æœç´¢
                reaction: false, // å¯¹æ–‡ç« æ‰“åˆ†
                pageview: false, // æµè§ˆé‡ç»Ÿè®¡
                comment: false, // è¯„è®ºæ•°ç»Ÿè®¡

                locale: {
                    placeholder: 'æ­£ç¡®çš„é‚®ç®±åœ°å€ï¼Œå›å¤å°†èƒ½å¾—åˆ°é‚®ä»¶é€šçŸ¥ã€‚', 
                    sofa: ''
                },
            });
            
        }
        window.addEventListener('DOMContentLoaded', loadWaline);
    </script>



    
    
    
    </div>


     
</div>



                    
                    
                    <div class="footer">
    
        <span> 
            Â©2021-2023 China 

            
                

            
        </span>
    
</div>
<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>ğŸŒŠçœ‹è¿‡å¤§æµ·çš„äººä¸ä¼šå¿˜è®°æµ·çš„å¹¿é˜”ğŸŒŠ</span>
            
    
</div>


    
<link rel="stylesheet" href="/css/a11y-dark.min.css">

    
<script src="/js/highlight.min.js"></script>

    
<script src="/js/highlightjs-line-numbers.js"></script>



<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>
                </div>
            
    </body>
</html>