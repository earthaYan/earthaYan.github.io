<!DOCTYPE html>
<html lang="zh-CN">
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0,  viewport-fit=cover" name="viewport" />
    <meta name="description" content="cobraå­¦ä¹ ç¬”è®°" />
    <meta name="hexo-theme-A4" content="v1.7.1" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.webp">
    <title>Diary</title>

    
        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
            
<link rel="stylesheet" href="/css/waline.css">

        
    
    
<link rel="stylesheet" href="/css/ui.css">
 
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>
    
    <body>
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    
<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/favicon.webp" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">Diary</a> 
            <span class="description">å¤‡å¿˜å½•/ç¬”è®°æœ¬</span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">é¦–é¡µ</a></li>
            
        
            
                <li><a href="/list/">æ–‡ç« </a></li>
            
        
            
                <li><a href="/categories/">åˆ†ç±»</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">

    
        <div class="post-main-title">
            cobraå­¦ä¹ ç¬”è®°
        </div>
      
    

    <div class="post-md">
        
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%AE%89%E8%A3%85%E5%92%8C%E5%AF%BC%E5%85%A5"><span class="post-toc-text">å®‰è£…å’Œå¯¼å…¥</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="post-toc-text">åŸºç¡€æ¦‚å¿µ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Command"><span class="post-toc-text">Command</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Arg"><span class="post-toc-text">Arg</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Flags"><span class="post-toc-text">Flags</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E9%81%B5%E5%BE%AA%E7%9A%84%E6%A8%A1%E5%BC%8F%EF%BC%9A"><span class="post-toc-text">éµå¾ªçš„æ¨¡å¼ï¼š</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E4%B8%BE%E4%BE%8B"><span class="post-toc-text">ä¸¾ä¾‹</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#flag%E5%92%8Carg%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="post-toc-text">flagå’Œargçš„åŒºåˆ«</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Command-1"><span class="post-toc-text">Command</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Hidden"><span class="post-toc-text">Hidden</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#TraverseChildren"><span class="post-toc-text">TraverseChildren</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#CompletionOptions"><span class="post-toc-text">CompletionOptions</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#FParseErrWhitelist"><span class="post-toc-text">FParseErrWhitelist</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Run%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0"><span class="post-toc-text">Runç›¸å…³å‡½æ•°</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#PersistentPostRun"><span class="post-toc-text">PersistentPostRun</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#PostRun"><span class="post-toc-text">PostRun</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Run"><span class="post-toc-text">Run</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#PreRun"><span class="post-toc-text">PreRun</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#PersistentPreRun"><span class="post-toc-text">PersistentPreRun</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#PersistentPreRunE"><span class="post-toc-text">PersistentPreRunE</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Annotations"><span class="post-toc-text">Annotations</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Version"><span class="post-toc-text">Version</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Deprecated"><span class="post-toc-text">Deprecated</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#BashCompletionFunction"><span class="post-toc-text">BashCompletionFunction</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ArgAliases"><span class="post-toc-text">ArgAliases</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Args"><span class="post-toc-text">Args</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ValidArgsFunction"><span class="post-toc-text">ValidArgsFunction</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ValidArgs"><span class="post-toc-text">ValidArgs</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Example"><span class="post-toc-text">Example</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#GroupID"><span class="post-toc-text">GroupID</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E4%BD%9C%E7%94%A8"><span class="post-toc-text">ä½œç”¨</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Use"><span class="post-toc-text">Use</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E4%BD%9C%E7%94%A8-1"><span class="post-toc-text">ä½œç”¨</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="post-toc-text">è¯­æ³•</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Aliases"><span class="post-toc-text">Aliases</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E4%BD%9C%E7%94%A8-2"><span class="post-toc-text">ä½œç”¨</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SuggestFor"><span class="post-toc-text">SuggestFor</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Short"><span class="post-toc-text">Short</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%98%BE%E7%A4%BA%E6%9D%A1%E4%BB%B6"><span class="post-toc-text">æ˜¾ç¤ºæ¡ä»¶</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Long"><span class="post-toc-text">Long</span></a></li></ol></li></ol>
        
        <p>cobraæœ¬è´¨ï¼šGoçš„CLIï¼ˆå‘½ä»¤è¡Œç•Œé¢ï¼‰æ¡†æ¶<br>cobraä½œç”¨ï¼š</p>
<ul>
<li>åŒ…å«åˆ›å»ºç°ä»£åŒ–CLIåº”ç”¨çš„åº“</li>
<li>åŒ…å«ä¸€ä¸ªç”¨äºå¿«é€Ÿç”ŸæˆåŸºäºCobraçš„åº”ç”¨å’Œå‘½ä»¤æ–‡ä»¶çš„å·¥å…·</li>
</ul>
<h2 id="å®‰è£…å’Œå¯¼å…¥"><a href="#å®‰è£…å’Œå¯¼å…¥" class="headerlink" title="å®‰è£…å’Œå¯¼å…¥"></a>å®‰è£…å’Œå¯¼å…¥</h2><pre><code class="bash">go get -u github.com/spf13/cobra@latest
import &quot;github.com/spf13/cobra&quot;
</code></pre>
<h2 id="åŸºç¡€æ¦‚å¿µ"><a href="#åŸºç¡€æ¦‚å¿µ" class="headerlink" title="åŸºç¡€æ¦‚å¿µ"></a>åŸºç¡€æ¦‚å¿µ</h2><h3 id="Command"><a href="#Command" class="headerlink" title="Command"></a>Command</h3><ul>
<li>å‘½ä»¤ï¼Œè¡¨ç¤ºä¸€ä¸ªè¡Œä¸ºæˆ–è€…åŠ¨ä½œï¼Œæ¯”å¦‚<code>serve</code>,<code>add</code>,<code>version</code></li>
<li>ä¸€ä¸ªå‘½ä»¤å¯ä»¥æœ‰å¤šä¸ªå­å‘½ä»¤</li>
</ul>
<h3 id="Arg"><a href="#Arg" class="headerlink" title="Arg"></a>Arg</h3><ul>
<li>å‚æ•°ï¼Œä»£è¡¨æŸä¸ªå¯¹è±¡æˆ–äº‹ç‰©</li>
<li>é€šå¸¸ä½äºå‘½ä»¤ä¹‹åï¼Œæ¯”å¦‚<code>serve web</code> ä¸­çš„ <code>web</code></li>
</ul>
<h3 id="Flags"><a href="#Flags" class="headerlink" title="Flags"></a>Flags</h3><ul>
<li>æ ‡è®°ï¼Œç”¨äºä¿®é¥°æˆ–è€…é…ç½®å‘½ä»¤çš„è¡Œä¸ºï¼Œä»¥<code>--</code>æˆ–è€…<code>-</code>å¼€å¤´</li>
<li>æ¯”å¦‚ <code>--port</code>æˆ–è€…<code>-p</code></li>
</ul>
<h2 id="éµå¾ªçš„æ¨¡å¼ï¼š"><a href="#éµå¾ªçš„æ¨¡å¼ï¼š" class="headerlink" title="éµå¾ªçš„æ¨¡å¼ï¼š"></a>éµå¾ªçš„æ¨¡å¼ï¼š</h2><ol>
<li><code>APPNAME VERB NOUN --ADJECTIVE</code><br>git(APPNAME) add(VERB) file(NOUN)</li>
<li><code>APPNAME COMMAND ARG --FLAG</code><br>git(APPNAME) commit(COMMAND) docs&#x2F;README.md(ARG) -m(FLAG)</li>
</ol>
<h3 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h3><p><code>hugo serve -p 8080 --baseURL https://example.com </code></p>
<ul>
<li>command: serve,è¡¨ç¤ºå¯åŠ¨hugoçš„æœåŠ¡å™¨</li>
<li>flagï¼š<code>-p</code>,<code>--baseUrl</code>,ç”¨äºè®¾ç½®ç«¯å£å’ŒbaseUrl</li>
<li>argï¼šæ— </li>
</ul>
<p><code>git add . </code></p>
<ul>
<li>command: add,è¡¨ç¤ºgitæ·»åŠ æ–‡ä»¶</li>
<li>flagï¼šæ— </li>
<li>argï¼š<code>.</code>ï¼Œä»£è¡¨å½“å‰ç›®å½•<br><code>git commit -m &quot;Update README&quot;</code></li>
<li>command: commit,è¡¨ç¤ºgitæäº¤æ–‡ä»¶</li>
<li>flagï¼š<code>-m</code>,è®¾ç½®æäº¤ä¿¡æ¯</li>
<li>argï¼šæ— </li>
</ul>
<h3 id="flagå’Œargçš„åŒºåˆ«"><a href="#flagå’Œargçš„åŒºåˆ«" class="headerlink" title="flagå’Œargçš„åŒºåˆ«"></a>flagå’Œargçš„åŒºåˆ«</h3><ol>
<li>argä»£è¡¨ å¿…é€‰å‚æ•°ï¼Œflagä»£è¡¨å¯é€‰å‚æ•°</li>
<li>argå¦‚æœç¼ºå°‘åˆ™commandä¼šæŠ¥é”™ï¼Œflagç¼ºå°‘ä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯ä¼šä½¿ç”¨é»˜è®¤å€¼</li>
</ol>
<h2 id="Command-1"><a href="#Command-1" class="headerlink" title="Command"></a>Command</h2><p>ç±»å‹å®šä¹‰</p>
<pre><code class="go">type Command struct&#123;
    Use string
    Aliases []string
    SuggestFor []string
    Short string
    GroupID string
    Example  string
    ValidArgs []string
    ValidArgsFunction func(cmd *Command, args []string, toComplete string) ([]string, ShellCompDirective)
    Args PositionalArgs
    ArgAliases []string
    BashCompletionFunction string
    Deprecated string
    Annotations map[string]string
    Version string
    PersistentPreRun func(cmd *Command, args []string)
    PersistentPreRunE func(cmd *Command, args []string) error
    PreRun func(cmd *Command, args []string)
    PreRunE func(cmd *Command, args []string) error
    Run func(cmd *Command, args []string)
    RunE func(cmd *Command, args []string) error
    PostRun func(cmd *Command, args []string)
    PostRunE func(cmd *Command, args []string) error
    PersistentPostRun func(cmd *Command, args []string)
    PersistentPostRunE func(cmd *Command, args []string) error
    FParseErrWhitelist FParseErrWhitelist
    CompletionOptions CompletionOptions
    TraverseChildren bool
    Hidden bool
    SilenceErrors bool
    SilenceUsage bool
    DisableFlagParsing bool
    DisableAutoGenTag bool
    DisableFlagsInUseLine bool
    DisableSuggestions bool
    SuggestionsMinimumDistance int
&#125;
</code></pre>
<h3 id="Hidden"><a href="#Hidden" class="headerlink" title="Hidden"></a>Hidden</h3><p>å®šä¹‰è¯¥å‘½ä»¤ä¸åº”è¯¥å‡ºç°åœ¨å¯è·å¾—å‘½ä»¤åˆ—è¡¨ä¸­çš„</p>
<h3 id="TraverseChildren"><a href="#TraverseChildren" class="headerlink" title="TraverseChildren"></a>TraverseChildren</h3><p>å®šä¹‰å½“ç”¨æˆ·è¾“å…¥è¯¥å‘½ä»¤çš„è·¯å¾„æ—¶,æ˜¯å¦éå†å…¶å­å‘½ä»¤ã€‚</p>
<h3 id="CompletionOptions"><a href="#CompletionOptions" class="headerlink" title="CompletionOptions"></a>CompletionOptions</h3><p>å®šä¹‰è‡ªåŠ¨è¡¥å…¨é€‰é¡¹</p>
<pre><code class="go">var cmd = &amp;cobra.Command&#123;
  CompletionOptions: cobra.CompletionOptions&#123;
    Flags: []string&#123;&quot;flag1&quot;, &quot;flag2&quot;&#125;,
    Commands: []string&#123;&quot;subcmd1&quot;, &quot;subcmd2&quot;&#125;,
    GlobalFlags: true,
  &#125;,
&#125;
</code></pre>
<h3 id="FParseErrWhitelist"><a href="#FParseErrWhitelist" class="headerlink" title="FParseErrWhitelist"></a>FParseErrWhitelist</h3><p>å®šä¹‰è¯¥å‘½ä»¤åœ¨æ ‡å¿—è§£æé˜¶æ®µå¿½ç•¥çš„é”™è¯¯ã€‚<br>åŸæœ¬ï¼šå½“æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä¸å‘½ä»¤æ ‡å¿—ä¸åŒ¹é…çš„å†…å®¹æ—¶,Cobra ä¼šè¿”å›ä¸€ä¸ª flag parse error</p>
<pre><code class="bash">Error: unknown flag: --gh
Usage:
  add [action] [options] [target] [flags]

Flags:
  -h, --help   help for add
</code></pre>
<h3 id="Runç›¸å…³å‡½æ•°"><a href="#Runç›¸å…³å‡½æ•°" class="headerlink" title="Runç›¸å…³å‡½æ•°"></a>Runç›¸å…³å‡½æ•°</h3><blockquote>
<p>æ‰§è¡Œé¡ºåºï¼š<br>PersistentPreRun()<br>PreRun()<br>Run()<br>PostRun()<br>PersistentPostRun()<br><strong>Runå’ŒRunEçš„åŒºåˆ«æ˜¯åè€…ä¼šè¿”å›error</strong></p>
</blockquote>
<h4 id="PersistentPostRun"><a href="#PersistentPostRun" class="headerlink" title="PersistentPostRun"></a>PersistentPostRun</h4><p>ä¼šåœ¨æ¯æ¬¡è¿è¡ŒRunå‘½ä»¤åè¢«è°ƒç”¨ï¼Œä¼šè¢«å­å‘½ä»¤ç»§æ‰¿</p>
<h4 id="PostRun"><a href="#PostRun" class="headerlink" title="PostRun"></a>PostRun</h4><p>åœ¨Runä¹‹åè°ƒç”¨ï¼Œä¸»è¦ç”¨äºæ”¶å°¾å·¥ä½œ</p>
<ul>
<li>æ¸…ç†ä¸´æ—¶æ–‡ä»¶</li>
<li>æ–­å¼€æ•°æ®åº“è¿æ¥</li>
<li>åœæ­¢æ—¥å¿—è®°å½•</li>
</ul>
<h4 id="Run"><a href="#Run" class="headerlink" title="Run"></a>Run</h4><p>é€šå¸¸æ˜¯å®é™…åŠŸèƒ½å‡½æ•°ï¼Œå‘½ä»¤çš„æ ¸å¿ƒåŠŸèƒ½</p>
<ul>
<li>è®¿é—®å‘½ä»¤çš„æ ‡å¿—ã€å‚æ•°ç­‰</li>
<li>æ‰§è¡Œå‘½ä»¤çš„ä¸»è¦ä¸šåŠ¡é€»è¾‘</li>
<li>è°ƒç”¨å¤–éƒ¨æœåŠ¡</li>
<li>ä¿®æ”¹ç³»ç»ŸçŠ¶æ€</li>
<li>è¿”å›ç»“æœç»™ç”¨æˆ·</li>
<li>å¦‚æœæ²¡æœ‰å®šä¹‰Run,æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªç©ºå‘½ä»¤</li>
</ul>
<h4 id="PreRun"><a href="#PreRun" class="headerlink" title="PreRun"></a>PreRun</h4><p>ä¼šåœ¨æ¯æ¬¡è¿è¡Œè¯¥å‘½ä»¤å‰è¢«è°ƒç”¨ï¼Œä¸ä¼šè¢«å­å‘½ä»¤ç»§æ‰¿</p>
<h4 id="PersistentPreRun"><a href="#PersistentPreRun" class="headerlink" title="PersistentPreRun"></a>PersistentPreRun</h4><p>ä¼šåœ¨æ¯æ¬¡è¿è¡Œè¯¥å‘½ä»¤å‰è¢«è°ƒç”¨ï¼Œä¼šè¢«å­å‘½ä»¤ç»§æ‰¿</p>
<ol>
<li>éªŒè¯å…¨å±€æ ‡å¿—æˆ–ç¯å¢ƒå˜é‡</li>
<li>å¯åŠ¨æ—¥å¿—è®°å½•</li>
<li>è¿æ¥æ•°æ®åº“ç­‰</li>
</ol>
<h4 id="PersistentPreRunE"><a href="#PersistentPreRunE" class="headerlink" title="PersistentPreRunE"></a>PersistentPreRunE</h4><h3 id="Annotations"><a href="#Annotations" class="headerlink" title="Annotations"></a>Annotations</h3><p>ç”¨äºä¸ºè¯¥å‘½ä»¤æ·»åŠ æ³¨è§£ï¼Œå¯ä»¥ç”¨<code>cmd.Annotations</code>è®¿é—®ï¼Œä¸»è¦ç”¨äºåœ¨åº”ç”¨é€»è¾‘ä¸­ä¼ é€’å’Œå…±äº«ä¸Šä¸‹æ–‡ä¿¡æ¯,å¯¹æœ€ç»ˆç”¨æˆ·ä¸å¯è§ã€‚</p>
<h3 id="Version"><a href="#Version" class="headerlink" title="Version"></a>Version</h3><p>ä¸ºå‘½ä»¤å®šä¹‰ç‰ˆæœ¬ï¼Œå¦‚æœå‘½ä»¤ä¸­å®šä¹‰äº†è¯¥å­—æ®µä¸”å‘½ä»¤è¿˜æ²¡æœ‰å®šä¹‰ <code>version</code>æ ‡å¿—ï¼Œåˆ™cobraä¼šè‡ªåŠ¨ç»™å‘½ä»¤æ·»åŠ  â€“versionå’Œ-v æ ‡å¿—ï¼Œå‰ææ˜¯è¿™ä¸¤è€…éƒ½æ²¡æœ‰å®šä¹‰ã€‚<br>æ‰§è¡Œ<code>cmd --version</code>ä¼šè¾“å‡ºVersionä¸­å®šä¹‰çš„å€¼</p>
<h3 id="Deprecated"><a href="#Deprecated" class="headerlink" title="Deprecated"></a>Deprecated</h3><p>å¦‚æœè¯¥å‘½ä»¤å·²ç»è¢«åºŸå¼ƒï¼Œå½“ä½¿ç”¨çš„æ—¶å€™åº”è¯¥æ‰“å°è¿™ä¸ªå­—ç¬¦ä¸²</p>
<h3 id="BashCompletionFunction"><a href="#BashCompletionFunction" class="headerlink" title="BashCompletionFunction"></a>BashCompletionFunction</h3><p>å€¼æ˜¯æˆ‘ä»¬çš„ Bash è‡ªåŠ¨è¡¥å…¨å‡½æ•°çš„å‡½æ•°å,ä¾‹å¦‚:</p>
<pre><code class="go">go
var cmd = &amp;cobra.Command&#123;
  BashCompletionFunction: &quot;autocompleteDo&quot;,
&#125;
// åŒåå‡½æ•°å®ç°
func autocompleteDo(cmd *cobra.Command, args []string, toComplete string) ([]string, cobra.ShellCompDirective) &#123;
  // ...
&#125;
</code></pre>
<h3 id="ArgAliases"><a href="#ArgAliases" class="headerlink" title="ArgAliases"></a>ArgAliases</h3><p>ValidArgsåˆ«ååˆ—è¡¨ï¼Œä¸ä¼šæç¤ºç»™ç”¨æˆ·ï¼Œä½†æ˜¯æ‰‹åŠ¨è¾“å…¥ä¹Ÿä¼šæ¥æ”¶</p>
<h3 id="Args"><a href="#Args" class="headerlink" title="Args"></a>Args</h3><p>ä½œç”¨ï¼šæŒ‡å®šå®ƒæ¥æ”¶çš„ä½ç½®å‚æ•°æ¨¡å¼,åœ¨å†…éƒ¨å¯ä»¥ï¼š</p>
<ol>
<li>å®šä¹‰å½“å‰å‘½ä»¤æ¥æ”¶çš„ä½ç½®å‚æ•°</li>
<li>æ ¡éªŒç”¨æˆ·è¾“å…¥çš„å‚æ•°æ˜¯å¦æ­£ç¡®</li>
<li>è¿”å›ä¸€ä¸ª nil çš„ error è¡¨ç¤ºæ ¡éªŒæˆåŠŸ,æˆ–è¿”å›é nil çš„ error è¡¨ç¤ºæ ¡éªŒå¤±è´¥<br>å–å€¼ç±»å‹ï¼š<code>PositionalArgs</code></li>
</ol>
<pre><code class="go">type PositionalArgs func(*Command, []string) error
</code></pre>
<h3 id="ValidArgsFunction"><a href="#ValidArgsFunction" class="headerlink" title="ValidArgsFunction"></a>ValidArgsFunction</h3><p>åŠ¨æ€çš„ValidArgsï¼Œä¸€ä¸ªå‘½ä»¤ä¸­ä¸èƒ½åŒæ—¶å­˜åœ¨<code>ValidArgsFunction</code>å’Œ<code>ValidArgs</code>é€‰é¡¹</p>
<ul>
<li>ç¬¬ä¸‰ä¸ªå‚æ•°<code>toCoplete</code>ç”¨äºå®ç°å‘½ä»¤è¡¥å…¨<ul>
<li>cobra.ShellCompDirectiveDefault:ç»§ç»­ä½¿ç”¨é»˜è®¤çš„è¡¥å…¨æ–¹æ¡ˆ</li>
<li>cobra.ShellCompDirectiveErrorï¼šé˜»æ­¢è¡¥å…¨å¹¶è¿”å›é”™è¯¯</li>
<li>cobra.ShellCompDirectiveNoFileCompï¼šä»…æä¾›æ–‡ä»¶åè¡¥å…¨è€Œéå‘½ä»¤è¡¥å…¨</li>
</ul>
</li>
</ul>
<pre><code class="go">ValidArgsFunction: func(cmd *cobra.Command, args []string, toComplete string) ([]string, cobra.ShellCompDirective) &#123;
    // æ£€æŸ¥ toComplete æ˜¯å¦ä»¥ &quot;enabl&quot; å¼€å¤´,å¦‚æœæ˜¯åˆ™è¿”å›å¯èƒ½çš„è¡¥å…¨é€‰é¡¹ [&quot;enable&quot;, &quot;enables&quot;, &quot;enabling&quot;]
  if toComplete == &quot;enabl&quot; &#123;
    return []string&#123;&quot;enable&quot;, &quot;enables&quot;, &quot;enabling&quot;&#125;, cobra.ShellCompDirectiveNoFileComp 
  &#125;
  
  if args[0] != &quot;enable&quot; &#123;
    // é˜»æ­¢è¡¥å…¨å¹¶è¿”å›é”™è¯¯
    return nil, cobra.ShellCompDirectiveError
  &#125;
  
  return nil, cobra.ShellCompDirectiveDefault
&#125; 
</code></pre>
<h3 id="ValidArgs"><a href="#ValidArgs" class="headerlink" title="ValidArgs"></a>ValidArgs</h3><p>ä½œç”¨ï¼šå®šä¹‰å‘½ä»¤æ¥æ”¶çš„æ‰€æœ‰åˆæ³•çš„éflagå‚æ•°ï¼Œcobraä¼šæ ¹æ®è¿™ä¸ªéªŒè¯ç”¨æˆ·åœ¨shellå‘½ä»¤ä¸­è¾“å…¥çš„å‚æ•°æ˜¯å¦æœ‰æ•ˆï¼Œå¹¶åœ¨helpè¾“å‡ºä¸­ç”Ÿæˆå‚æ•°åˆ—è¡¨ä¿¡æ¯<br>ç–‘é—®ï¼šä¸ºä»€ä¹ˆå®šä¹‰äº†ValidArgsï¼Œè¿è¡Œ.&#x2F;demo addä¸ä¼šæŠ¥é”™ï¼Ÿ<br>åŸå› ï¼šcobraçš„è§£ææµç¨‹å¯¼è‡´çš„</p>
<ol>
<li>è§£æå‘½ä»¤é“¾,è¯†åˆ«å‡ºå„ä¸ªå‘½ä»¤å’Œå‚æ•°</li>
<li>å¯¹æ¯ä¸ªå‘½ä»¤åŠå…¶å‚æ•°,æ£€æŸ¥æ˜¯å¦ç¬¦åˆ ValidArgs ä¸­çš„è¦æ±‚</li>
<li>å¦‚æœä¸ç¬¦åˆ,åˆ™è§†ä¸ºæ™®é€šå‚æ•°ä¼ å…¥,å¹¶ç»§ç»­åç»­æ£€æŸ¥</li>
<li>æ£€æŸ¥æ˜¯å¦å®šä¹‰äº†è¯¥å‚æ•°çš„å­å‘½ä»¤</li>
<li>å¦‚æœæ²¡æœ‰å­å‘½ä»¤,åˆ™å°†è¯¥å‚æ•°ä¼ å…¥ Run æ–¹æ³•</li>
<li>åœ¨ Run æ–¹æ³•ä¸­,éœ€è¦æˆ‘ä»¬è‡ªè¡Œåˆ¤æ–­è¯¥å‚æ•°æ˜¯å¦æœ‰æ•ˆ,å¦‚æœæ— æ•ˆéœ€è¦æ‰‹åŠ¨æŠ¥é”™</li>
</ol>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>ä½œç”¨ï¼šç¤ºèŒƒå¦‚ä½•ä½¿ç”¨å‘½ä»¤<br>åŒºåˆ«ï¼šUseå®šä¹‰è§„èŒƒï¼ŒExampleå±•ç¤ºç”¨ä¾‹</p>
<h3 id="GroupID"><a href="#GroupID" class="headerlink" title="GroupID"></a>GroupID</h3><h4 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h4><p>ç”¨äºå°†å‘½ä»¤åˆ†ç»„ï¼Œå…·æœ‰ç›¸åŒ GroupID çš„å‘½ä»¤ä¼šè¢«æ”¾å…¥åŒä¸€ä¸ªå‘½ä»¤ç»„ä¸­ã€‚</p>
<ol>
<li>å®é™…ä½¿ç”¨ä¸­ä¸ä¼šå½±å“å‘½ä»¤çš„å®é™…è¡Œä¸º</li>
<li>ä¼˜åŒ–helpè¾“å‡ºå’Œè‡ªåŠ¨è¡¥å…¨åŠŸèƒ½</li>
</ol>
<h3 id="Use"><a href="#Use" class="headerlink" title="Use"></a>Use</h3><h4 id="ä½œç”¨-1"><a href="#ä½œç”¨-1" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h4><ol>
<li>å®šä¹‰å‘½ä»¤çš„ä½¿ç”¨è¯´æ˜,ä½¿ç”¨æˆ·å¿«é€Ÿç†è§£æ¯ä¸ªå‘½ä»¤åŠå…¶å­å‘½ä»¤çš„ç”¨æ³•</li>
<li>åœ¨ä½¿ç”¨<code>--help</code>æ—¶æ˜¾ç¤º,æä¾›å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯</li>
<li>æä¾›ä¸€ç§æ£€éªŒå‘½ä»¤è®¾è®¡çš„æ‰‹æ®µ</li>
</ol>
<h4 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><p><code>Use:   &quot;add [-F file | -D dir]... [-f format] profile&quot;</code><br>å‘½ä»¤è¡Œä½¿ç”¨:<code>./cobraDemo add xxx</code></p>
<ol>
<li><code>[]</code>è¡¨ç¤ºè¿™ä¸ªæ˜¯å¯é€‰å‚æ•°,å…¶ä»–çš„å‚æ•°æ˜¯å¿…é¡»å‚æ•°</li>
<li><code>...</code>è¡¨ç¤ºå¯ä»¥ä¸ºå‰é¢çš„å‚æ•°æŒ‡å®šå¤šä¸ªå€¼,æ¯”å¦‚<code>Use: &quot;app STR... NUM...&quot;</code>,ä½¿ç”¨<code>app hello world 2 3</code> ã€‚ä¸€ä¸ªé”®(key)å¯ä»¥æœ‰å¤šä¸ªå€¼(value)</li>
<li><code>|</code>è¡¨ç¤ºäº’æ–¥,åœ¨ä¸€ä¸ªå‘½ä»¤é‡Œä¸èƒ½åŒæ—¶ä½¿ç”¨ä¸¤è¾¹çš„å‚æ•°</li>
<li><code>&#123;&#125;</code>è¡¨ç¤ºåˆ†éš”ä¸€ç»„äº’æ–¥å‚æ•°,æ¯”å¦‚<code>add &#123;arg1|arg2|arg3&#125; &#123;arg4|arg5|arg6&#125;</code></li>
</ol>
<blockquote>
<ul>
<li>å¦‚æœgo buildç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ådemoå’Œ rootCmd çš„ Use å­—æ®µç¬¬ä¸€ä¸ªå•è¯ç›¸åŒ,é‚£ä¹ˆ .&#x2F;demo ä¼šç›´æ¥è¢« Cobra è¯†åˆ«ä¸º rootCmd å‘½ä»¤,è€Œä¸æ˜¯æ™®é€šå‚æ•°ã€‚</li>
<li>å¦‚æœä¸åŒï¼Œåˆ™.&#x2F;demoç›¸å½“äºæ™®é€šå‚æ•°ä¼ å…¥ï¼Œéœ€è¦åœ¨Runæ–¹æ³•ä¸­è‡ªè¡Œè§£æ</li>
</ul>
</blockquote>
<h3 id="Aliases"><a href="#Aliases" class="headerlink" title="Aliases"></a>Aliases</h3><h4 id="ä½œç”¨-2"><a href="#ä½œç”¨-2" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h4><ol>
<li>è¡¨ç¤ºå‘½ä»¤æˆ–å‚æ•°çš„åˆ«å</li>
<li><code> Aliases: []string&#123;&quot;param1&quot;, &quot;p1&quot;,&quot;param2&quot;,&quot;p2&quot;&#125;</code>-param1çš„åˆ«åæ˜¯p1,param2çš„åˆ«åæ˜¯p2</li>
</ol>
<h3 id="SuggestFor"><a href="#SuggestFor" class="headerlink" title="SuggestFor"></a>SuggestFor</h3><p>ä½œç”¨ï¼šç”¨äºä¸ºç”¨æˆ·è¾“å…¥çš„é”™è¯¯å‚æ•°æä¾›å»ºè®®<br>æ¡ˆä¾‹ï¼š</p>
<pre><code class="go">var rootCmd = &amp;cobra.Command&#123;
    Use:        &quot;app start|stop&quot;,  
    Args:       cobra.ExactArgs(1), 
    ValidArgs:  []string&#123;&quot;start&quot;, &quot;stop&quot;&#125;,
    SuggestFor: []string&#123;&quot;run&quot;&#125;, // å¯¹ &quot;run&quot; æä¾›å»ºè®®
&#125;
</code></pre>
<p>æ­¤æ—¶ç”¨æˆ·è¾“å…¥<code>app run</code>ï¼Œé”™è¯¯æç¤ºä¼šå˜ä¸ºï¼š</p>
<ul>
<li>ä¸è®¾ç½®SuggstFor<blockquote>
<p>Error: invalid argument â€œrunâ€ for â€œappâ€<br>Usage: app start|stop</p>
</blockquote>
</li>
<li>è®¾ç½®SuggstFor</li>
</ul>
<pre><code class="go">SuggestFor: []string&#123;&quot;run&quot;&#125;, // å¯¹ &quot;run&quot; æä¾›å»ºè®®
</code></pre>
<blockquote>
<p>Error: invalid argument â€œrunâ€ for â€œappâ€<br>Did you mean â€œstartâ€ or â€œstopâ€?<br>Usage: app start|stop</p>
</blockquote>
<h3 id="Short"><a href="#Short" class="headerlink" title="Short"></a>Short</h3><p>å®šä¹‰å‘½ä»¤æˆ–å­—æ®µçš„ç®€çŸ­æè¿°ï¼Œåœ¨<code>help</code>é‡Œå±•ç¤ºçš„ç®€çŸ­æè¿°</p>
<h4 id="æ˜¾ç¤ºæ¡ä»¶"><a href="#æ˜¾ç¤ºæ¡ä»¶" class="headerlink" title="æ˜¾ç¤ºæ¡ä»¶"></a>æ˜¾ç¤ºæ¡ä»¶</h4><ol>
<li>å®é™…å®šä¹‰äº†è¯¥å­—æ®µ</li>
<li>æ²¡æœ‰å®šä¹‰Longå­—æ®µ<br>å¦‚æœåŒæ—¶å®šä¹‰äº†ï¼Œåˆ™åªä¼šå±•ç¤ºLongå­—æ®µ</li>
</ol>
<h3 id="Long"><a href="#Long" class="headerlink" title="Long"></a>Long</h3><p>ä½œç”¨ï¼šå®šä¹‰å‘½ä»¤æˆ–å­—æ®µçš„ è¯¦ç»†æè¿°</p>

    </div>

    <div class="post-meta">
        <i>
        
            <span>2023-04-03</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« Moon</span>
            
            
                <span>æ‰“ä¸Šæ ‡ç­¾:
                    
                    
                        <a href='/tags/GoLang/'>
                            GoLang
                        </a>
                    
                </span>
             
             
                <span>å½’ä¸ºåˆ†ç±»:
                    
                    
                        <a href='/categories/%E5%90%8E%E7%AB%AF/'>
                            åç«¯
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    
        
    <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        ä»¥ä¸Šã€‚ 
    </div>
    
        

    <div id="waline"></div>
    <script type="module"  >
        import { init } from 'https://npm.elemecdn.com/hexo-theme-a4@latest/source/js/waline.mjs'; 
        function loadWaline() {
            init({
                el: '#waline',
                serverURL: 'https://comment-hexo-waline.vercel.app/',
                lang: 'zh-CN',
                dark: 'body[class~="dark-mode"]',
                requiredMeta: ['nick','mail'], // cannot customize by theme config, change it yourself
                search: false, // ç¦æ­¢è¡¨æƒ…åŒ…æœç´¢
                reaction: false, // å¯¹æ–‡ç« æ‰“åˆ†
                pageview: false, // æµè§ˆé‡ç»Ÿè®¡
                comment: false, // è¯„è®ºæ•°ç»Ÿè®¡

                locale: {
                    placeholder: 'æ­£ç¡®çš„é‚®ç®±åœ°å€ï¼Œå›å¤å°†èƒ½å¾—åˆ°é‚®ä»¶é€šçŸ¥ã€‚', 
                    sofa: ''
                },
            });
            
        }
        window.addEventListener('DOMContentLoaded', loadWaline);
    </script>



    
    
    
    </div>


     
</div>



                    
                    
                    <div class="footer">
    
        <span> 
            Â©2021-2023 China 

            
                

            
        </span>
    
</div>
<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>ğŸŒŠçœ‹è¿‡å¤§æµ·çš„äººä¸ä¼šå¿˜è®°æµ·çš„å¹¿é˜”ğŸŒŠ</span>
            
    
</div>


    
<link rel="stylesheet" href="/css/a11y-dark.min.css">

    
<script src="/js/highlight.min.js"></script>

    
<script src="/js/highlightjs-line-numbers.js"></script>



<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>
                </div>
            
    </body>
</html>