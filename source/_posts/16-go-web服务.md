---
title: 16-go-web服务
date: 2022-11-29 09:25:04
tags: [golang, 后端, 实践]
categories: GoLang
---

{% asset_img web服务.webp web服务分类 %}
> 前提：要实现一个web服务，必须先选择通信协议和通信格式。如果服务本身主要是提供REST 风格的API，则使用HTTP+JSON。反之则使用gRpc+Protobuf
## 基础功能
### 路由匹配
概念：根据(HTTP方法, 请求路径)匹配到处理这个请求的函数，最终由该函数处理这次请求，并返回结果
{% asset_img 路由匹配.webp 路由匹配%}
如上图所示：
-   最终这个请求由`Delete(c *gin.Context)`处理
-   参数c存放了请求参数
-   在函数Delete中进行业务处理(参数解析->参数校验->逻辑处理->返回结果)：也是web服务的核心诉求

### 路由分组
原因：API 接口随着需求的更新迭代，可能会有多个版本，为了便于管理，所以需要进行路由分组
### 一进程多服务
原因：避免为相同功能启动多个进程
典型例子：在一个服务进程中，同时开启 HTTP 服务的 80 端口和 HTTPS 的 443 端口对内的服务，访问 80 端口，简化服务访问复杂度；对外的服务，访问更为安全的 HTTPS 服务；此时有了

---
## 高级功能
### 中间件
原因：进行http请求的时候需要针对每一次请求都设置一些通用的操作，比如添加 Header、添加 RequestID、统计请求次数等
### 认证
- 方式1：基于用户名和密码
- 方式2：基于Token
### RequestID
原因：定位和跟踪某一次请求用来排障
### 跨域请求
原因：项目前后端分离，前端访问地址和后端访问地址不同，会因为浏览器的同源策略产生跨域问题
---
## Gin框架
基于net/http包封装的开源框架
### 选择web框架的考虑因素
1.  路由功能
2.  是否具有中间件或者过滤功能
3.  http的参数的解析和返回能力
4.  性能，稳定性
5.  使用门槛
6.  社区活跃度