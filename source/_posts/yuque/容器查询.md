---
title: 容器查询
urlname: gnwctw
date: '2022-07-19 21:37:43 +0800'
tags: [工作]
categories: [工作]
---

## WHY

响应式布局用的比较多的是媒体查询，即查询浏览器窗口的可视区域宽度，根据不同的大小设置不同的 CSS 样式，让元素在不同屏幕大小下，都可以显示正常。但是很多情况下，一个组件可能在多个页面/项目中使用，而每个页面/项目的布局都不一样，在同样的浏览器宽度下，这个组件的所在容器的宽度可能也会不一样，所以需要基于目标元素的父元素（容器）的宽度去设置不同的 CSS 样式，也就是容器查询。

## WHAT

为了支持容器查询，CSS 的新规范中增加了 container-type、container-name 和 container 三个属性。

- [constainer-type](https://drafts.csswg.org/css-contain-3/#propdef-container-type):将元素定义为查询容器，允许后代元素对他进行查询
  - normal：这个查询容器不可以查询大小，但是仍然可以查询样式
  - size/inline-size 中的一个或多个，目前尝试下来生效的好像只有 inline-size
    - size：查询容器容器内的元素可以在水平和纵向两个方向查询布局，大小和样式
    - inline-size：查询容器容器内的元素可以查询水平方向的布局，大小和样式，调整自己的布局
- container-name：为容器进行命名，当有多个查询容器的时候可以用容器名称进行区分,可以省略
- constainer：缩写，代表 container-type/container-name
- [@container](https://drafts.csswg.org/css-contain-3/#container-rule) 规则：可以像@media 一样设置不同的容器宽度下的 css 样式

## HOW

目前容器查询还处于草案阶段，主流的浏览器中只有 chrome 和 opera 支持，且需要手动设置为 enable
**开启方法：**
进入 chrome://flags，搜索 enable-container-queries，手动设置为 enabled 后重启 chrome
**代码实现：** 1.在目标元素的父元素上设置 container 属性，表明这是一个查询容器

```css
.parent-container {
  container-type: "inline-size";
  container-name: "container1";
}
```

2.给子元素添加容器查询-添加不同父容器宽度下的 css 样式

```css
@container (max-width: 850px) {
}
@container (max-width:950px) {
}
```

**应用：**
分离宏观布局和微观布局
![](https://cdn.nlark.com/yuque/0/2022/webp/115484/1658370835986-26b093c2-086c-4fa9-95c2-c189ed97276f.webp?x-oss-process=image%2Fresize%2Cw_892%2Climit_0#crop=0&crop=0&crop=1&crop=1&from=url&height=211&id=SP0Wm&margin=%5Bobject%20Object%5D&originHeight=493&originWidth=892&originalType=binary∶=1&rotation=0&showTitle=false&status=done&style=none&title=&width=381)

1. 容器查询 + 媒体查询

- 使用媒体查询设置整个页面布局
- 使用容器查询设置单个组件布局

2. 容器查询+网格布局

- 网格设置整体页面布局
- 容器查询设置单个组件布局

## WHERE

- 用户信息卡片
- 分页
- 两栏布局
