---
title: 支持长沙银行上线——服务发现
urlname: ehqeb7
date: '2022-06-14 14:37:23 +0800'
tags: []
categories: []
---

## 会前材料

> 不开没有准备的会。基于材料提前异步沟通、可以给会议带来惊人的提效。

[http://10.186.18.11/confluence/pages/viewpage.action?pageId=36613899](http://10.186.18.11/confluence/pages/viewpage.action?pageId=36613899)
[http://10.186.18.11/jira/browse/DMP-12779](http://10.186.18.11/jira/browse/DMP-12779)
[http://10.186.18.11/jira/browse/DMP-12505](http://10.186.18.11/jira/browse/DMP-12505)

## 会议议题

> 简要记录本次会议的主要议题讨论。

### 需求描述：

通过界面功能实现主机地址自动发现，主机自动纳管，人工确认。
具体步骤：客户不确定有哪些主机上有 mysql 服务，在部署 uagent 之前，客户在界面输入给定 IP 范围和端口范围，平台探测端口，列出存否存活服务，用户手动选择批量或逐个部署 agent。
![screenshot-1.png](https://cdn.nlark.com/yuque/0/2022/png/115484/1655189158972-7e720883-8679-4db8-8d01-4aa85c043c3c.png#clientId=ubc619b61-241c-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=356&id=u9052efd8&margin=%5Bobject%20Object%5D&name=screenshot-1.png&originHeight=587&originWidth=891&originalType=binary∶=1&rotation=0&showTitle=false&size=761598&status=done&style=none&taskId=u73c86e04-3c6a-401f-84c7-5cc554fc304&title=&width=539.9999687888424)

## 会前疑问：

![image2022-6-14 14_28_36.png](https://cdn.nlark.com/yuque/0/2022/png/115484/1655190283056-a987b64d-3383-4982-bbf2-b024648ee973.png#clientId=ubc619b61-241c-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=149&id=u471ff051&margin=%5Bobject%20Object%5D&name=image2022-6-14%2014_28_36.png&originHeight=359&originWidth=735&originalType=binary∶=1&rotation=0&showTitle=false&size=38303&status=done&style=none&taskId=u672daf1d-dae0-4083-ab5f-177f939a665&title=&width=304.4545593261719)![image2022-6-14 14_29_11.png](https://cdn.nlark.com/yuque/0/2022/png/115484/1655190283062-b09231c9-85de-45f5-8e71-f8f8fdf44f4e.png#clientId=ubc619b61-241c-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=138&id=u0e76fc80&margin=%5Bobject%20Object%5D&name=image2022-6-14%2014_29_11.png&originHeight=362&originWidth=686&originalType=binary∶=1&rotation=0&showTitle=false&size=46519&status=done&style=none&taskId=ufeb14c42-0c1c-415e-a187-3d4d7c5d811&title=&width=260.7548828125)![image2022-6-14 14_47_30.png](https://cdn.nlark.com/yuque/0/2022/png/115484/1655190283074-0659ec36-b56a-45da-9c98-afe4adbde7e8.png#clientId=ubc619b61-241c-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=181&id=u76b7aa04&margin=%5Bobject%20Object%5D&name=image2022-6-14%2014_47_30.png&originHeight=607&originWidth=720&originalType=binary∶=1&rotation=0&showTitle=false&size=79230&status=done&style=none&taskId=u999ba706-515a-4e8b-8f4d-dd5ea598d93&title=&width=214.3636474609375)

> 不开没有结论的会。哪怕“方案取消”或“下次再议”，也是结论的一种。

- 接管主机本质上就是跳转到主机管理界面，然后执行添加主机功能？
- 原型图中有接管数据库按钮，但是需求里好像没这个功能描述
- 批量接管主机功能中，并发度指什么？合法性检测，由研发提供经验值上限，这里的经验值上限指什么？
- 批量接管主机功能中，主机名用户可以手动修改，需要用到排序的场景是什么？

## 执行计划

> 设置后续待办任务，可使用 @人分配执行人。

- [ ] 主机页面新增子菜单-服务发现
- [ ] 服务发现表格 及筛选功能
- [ ] 默认：暂无数据
- [ ] 数据库类型，ip 范围、端口范围必填
- [ ] 数据库状态和主机状态需要颜色标识
- [ ] 表格内按钮
- [ ] 接管主机：用户点击该功能后，打开新的主机管理页面，并弹出添加主机功能，将当前主机 IP 自动填充到添加主机的网络地址
- [ ] 接管数据库
- [ ] 批量接管主机功能
- [ ] 主机连接
- [ ] 基础组件安装
- [ ] 确认主机

## 会议内容记录：

- 数据库类型除了 Mysql 其他暂时不显示
- 点击开始执行最好有一个交互显示，请求中按钮禁用
- 发现时间列是否一样需要研发判断
- 本期只实现接管主机功能
- 批量只选中未接管，禁用已接管
- 主机名初始值：server-IP 地址,参考接管
- 最后一步清单确认是否需要-待确认
- 查询表单：提示+校验
- 什么情况下需要显示确认清单，什么时候不显示？
