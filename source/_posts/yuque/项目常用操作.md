---
title: 项目常用操作
urlname: rw8g87
date: '2021-11-30 15:17:10 +0800'
tags: []
categories: []
---

# umc

#### ubuntu 国内安装 docker-compose

```bash
curl -L https://get.daocloud.io/docker/compose/releases/download/1.22.0/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
docker-compose --version
```

#### 仓库配置

[http://10.186.18.11/confluence/pages/viewpage.action?pageId=32048846](http://10.186.18.11/confluence/pages/viewpage.action?pageId=32048846)

#### 快速部署 UMC

[http://10.186.18.11/confluence/pages/viewpage.action?pageId=34772526](http://10.186.18.11/confluence/pages/viewpage.action?pageId=34772526)

#### ubuntu 常见错误--Could not get lock /var/lib/dpkg/lock 解决

```bash
 rm /var/cache/apt/archives/lock
 rm /var/lib/dpkg/lock
```

安装指定版本的 dmp:

```bash
make clean
vi env_setting.sh
//修改版本
make install
```

#### 升级安装包

[http://10.186.18.20:666/?version=9.9.9.9&linux=7&release=qa](http://10.186.18.20:666/?version=9.9.9.9&linux=7&release=qa) 所有的
umc 单个组件
wget [ftp://ftpuser:ftpuser@10.186.18.90/actiontech-umc/qa/9.9.9.9/umc-9.9.9.9.standard.qa.el7.x86_64.rpm](ftp://ftpuser:ftpuser@10.186.18.90/actiontech-umc/qa/9.9.9.9/umc-9.9.9.9.standard.qa.el7.x86_64.rpm)

ftp 下载文件
`wget ftp://ftpuser:ftpuser@10.186.18.90/redis-tarball/redis-6.2.6-centos7.tar.gz`

---

# dtle:

报错：

### docker: Error response from daemon: Get [https://docker-registry:5000/v2/:](https://docker-registry:5000/v2/:) http: server gave HTTP response to HTTPS client.

解决方法：

```bash
echo '{ "insecure-registries":["docker-registry:5000"] }' > /etc/docker/daemon.json
service docker restart
```

### navcat 连接数据库失败：

![1640848056(1).png](https://cdn.nlark.com/yuque/0/2021/png/115484/1640848065565-64400d94-d418-4edf-8c34-456eafb533ae.png#clientId=u654d962c-2bec-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=479&id=W48Ln&margin=%5Bobject%20Object%5D&name=1640848056%281%29.png&originHeight=958&originWidth=1101&originalType=binary∶=1&rotation=0&showTitle=false&size=44060&status=done&style=none&taskId=u69d9526e-408a-476a-81b0-9dd71f18233&title=&width=550.5)
解决方法：`select instance_name from v$instance` 获取 SID

## navcat 连接 oracle 数据库，出现：'ora-01045 :user system lacks create session privilege; logon denied'

原因：该用户没有创建 session 会话的权限
在 Google 找到这段的说明：
What does “ORA-01045: user USERNAME lacks CREATE SESSION privilege;logon denied” mean?
It means that the username and password with which you tried to login are known and accepted by the Oracle server, but that the username doesn’t have permission to create a session. If you think this username should have permission to create sessions send mail to acisdba.
解决方案：
`**grant create session to test**`

dtle 测试流程：

1. [oracle 11.2 快速启动带 logminer 的容器](http://10.186.18.21/sunjian/oracle_cdc)
1. docker container exec -it container_id bash 进入容器中
1. `sqlplus sys/oracle as sysdba` 进入数据库命令行
1. 创建用户 test

```sql
SQL> create user test identified by test;
SQL> grant unlimited tablespace to test;
```

5.修改用户密码：

```sql
alter user 用户名 identified by 新密码；
```

6.[dtle 快速搭建](https://actiontech.github.io/dtle-docs-cn/2/2.0_mysql_replication_1_1.html) 7.`docker exec --user=root -it d2f bash` 以 root 用户进入 dtle 容器 8.修改 api_addr 为 0.0.0.0
9.rpm 包中运行 dtle 命令

```bash
cd /usr/share/dtle/nomad-plugin
./dtle --version
```
