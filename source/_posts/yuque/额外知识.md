---
title: 额外知识
urlname: nunxac
date: '2021-12-31 14:09:22 +0800'
tags: []
categories: []
---

前端使用 docker 构建需要注意的地方：

1. 镜像中使用基于 alpine 的镜像，减小镜像体积。
1. 镜像中需要锁定 node 的版本号，尽可能也锁定 alpine 的版本号，如 node:10.19-alpine3.11。(我示例代码中未如此详细地指出)
1. 选择合适的环境变量 NODE_ENV 及 PROJECT_ENV，如在测试环境下进行构建
1. npm ci 替代 npm i，避免版本问题及提高依赖安装速度
1. package.json 单独添加，充分利用镜像缓存
1. 使用多阶段构建，减小镜像体积
1. 如有必要，静态资源请上 CDN
