---
title: 如何开发一个自己的前端脚手架2
date: 2023-06-21 17:24:33
tags: [脚手架,GoLang]
categories: 后端
---

## 使用的库：

1. [cobra](https://github.com/spf13/cobra)
2. [pflag](https://github.com/spf13/pflag)

## 实现过程

### 目录结构

> .
> ├── cmd
> │ ├── create.go
> │ └── root.go
> ├── flags
> │ └── flags.go
> ├── go.mod
> ├── go.sum
> ├── LICENSE
> ├── main.go
> └── README.md

### 定义并添加命令

/cmd/root.go

```go
var rootCmd = &cobra.Command{
	Use:     "custom-frontend-cli",
	Short:   "A frontend scaffold tool",
	Version: "0.0.1",
}
var createCmd = &cobra.Command{
	Use:   "custom-frontend-cli create <projectName>",
	Short: "create a new project with certain project name",
	Run:   createPeoject,
}

func init() {
	rootCmd.AddCommand(createCmd)
}
func Execute() {
	if err := rootCmd.Execute(); err != nil {
		fmt.Println("命令执行成功")
		os.Exit(1)
	}
}

```

/main.go

```go
func main() {
	cmd.Execute()
}
```

#### 遇见的问题

```go
var rootCmd = &cobra.Command{
	Use:     "custom-frontend-cli",
	Short:   "A frontend scaffold tool",
	Version: "0.0.1",
}
var createCmd = &cobra.Command{
	Use:   "custom-frontend-cli create <projectName>",
	Short: "create a new project with certain project name",
	Run:   createProject,
}
```
当调试执行 `go run . --help`的时候展示的是
{% asset_img help_error.jpg %}
问题：预期的命令`custom-frontend-cli create`变成了`custom-frontend-cli custom-frontend-cli create`
解决方法：定义子命令的时候不应该加父命令前缀

