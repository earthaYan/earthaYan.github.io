---
title: 权限管理
date: 2023-02-22 16:18:09
tags: [GoLang]
categories: 后端
---

{%asset_img terms.webp%}

## 常见的权限模型

### ACL:权限控制列表

作用：判断用户是否可以对资源做特定操作
案例：允许用户 colin 创建文章

```
Subject: Colin
Action: Create
Object: Article
```

### DAC:自主访问控制

基于 ACL 的扩展
作用：

1. 判断用户是否可以对资源做特定操作
2. 让用户可以将资源或者特定操作的相同权限授权给其他用户

### MAC:强制访问控制

1. 判断用户是否可以对资源做特定操作
2. 具有安全属性，做授权时，需要同时满足两点才能授权通过：
   - 用户 可以对资源 做特定操作
   - 资源 可以被 用户做 特定 操作

### RBAC:基于角色的访问控制

将权限与角色进行关联，用户通过扮演某种角色，具有该角色的所有权限。

#### 案例

现状：

```bash
# 用户拥有write article 和 manage article的权限
Permission:
    - Name: write_article
        - Effect: "allow"
        - Action: ["Create", "Update", "Read"]
        - Object: ["Article"]
    - Name: manage_article
        - Effect: "allow"
        - Action: ["Delete", "Read"]
        - Object: ["Article"]

# 有Writer、Manager 和 CEO 3个角色
# Writer有write_article权限, Manager有manage_article权限
# CEO拥有所有权限
Role:
    - Name: Writer
      Permissions:
        - write_article
    - Name: Manager
      Permissions:
        - manage_article
    - Name: CEO
      Permissions:
        - write_article
        - manage_article
```

授权：

```bash
# 对colin用户授予Writer角色
Subject: Colin
Roles:
    - Writer #Colin具有 Writer 角色的所有权限 write_article，write_article 权限可以创建文章
# 对James用户授予Writer 和 Manager 角色

Subject: James
Roles:
    - Writer #同时拥有Writer和Manager所有权限,允许james创建和删除文章
    - Manager
```

### ABAC 基于属性的权限验证

与 RBAC 区别：对权限的控制粒度更细

- 用户属性，例如性别、年龄、工作等。
- 资源属性，例如创建时间、所属位置等。
- 操作属性，例如创建、修改等。
- 环境属性，例如来源 IP、当前时间等。

```bash
# 产品部门的 Colin 作为一个 Writer 角色，可以通过来源 IP 是 10.0.0.10 的客户端，创建和更新带有 technology 和 software 标签的草稿文章
Subject:
    Name: Colin
    Department: Product
    Role: Writer
Action:
    - create
    - update
Resource:
    Type: Article
    Tag:
        - technology
        - software
    Mode:
        - draft
Contextual:
    IP: 10.0.0.10
```

## 相关开源项目：

1. [Casbin](https://github.com/casbin/casbin)->需要看
2. [Keto](https://github.com/ory/keto)
3. [go-admin](https://github.com/go-admin-team/go-admin)->需要看
4. [LyricTian/gin-admin](https://github.com/LyricTian/gin-admin)
5. [gin-vue-admin](https://github.com/flipped-aurora/gin-vue-admin)
