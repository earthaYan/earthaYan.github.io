---
title: 翻译-whats-new-in-http3
date: 2023-04-16 14:24:22
tags: [翻译, http]
categories: 翻译
---
原文地址：https://medium.com/better-programming/whats-new-in-http-3-10c2455a4f8c
## HTTP/3 中的新特性?

### 漫游 HTTP/0.9, HTTP/1.0, HTTP/1.1, HTTP/2, and HTTP/3

> "超文本传输协议（HTTP）是应用层协议，用于分布式、协作式超媒体信息系统。它是一个通用的、无状态的协议，可以用于超文本以外的很多任务，比如：name server 和分布式对象管理系统。-[W3](https://www.w3.org/Protocols/rfc2616/rfc2616.html)

HTTP 使浏览器和服务器能够通信。它构成了 web 服务器执行最基础的操作所必须有的基础。HTTP 经历了多个阶段。最新的草案 [超文本传输协议版本 3](https://quicwg.org/base-drafts/draft-ietf-quic-http.html) (HTTP/3)在 2021 年 5 月 27 日发布。

接下来我们了解下 HTTP 的历史，并探索 HTTP/3 中的新特性。

## HTTP/0.9

[Sir Timothy John Berners-Lee](https://en.wikipedia.org/wiki/Tim_Berners-Lee) , 也被称为 TimBL,是英国的计算机科学家，同时也是万维网的发明者。他在 1989 年创建了一行的 HTTP 协议 . 简单地返回了一个网页。这个协议在 1991 年被命名为 HTTP/0.9。

它只是一个简单的[单页规范](https://www.w3.org/Protocols/HTTP/AsImplemented.html)。只有一种方法：GET,后面跟着文档地址和可选端口地址，以回车(CR)和换行(LF)作为结束：

```bash
    GET /aWebpage.html
```

响应可能是被请求的 HTML 文件:

```html
<html>
  The Webpage content
</html>
```

或者也有可能是一个错误页面:

```html
<html>
  Cannot get the page
</html>
```

HTTP/0.9 有 4 个术语：连接，断开连接，请求和响应。没有 HTTP 头，状态码、错误码，也没有 cookie 以及其他的现代特性。HTTP/0.9 是基于 TCP——传输控制协议 构建的。connection 会在响应后立刻终止。

## HTTP/1.0

1996 年 HTTP/1.0 发布。[规范](https://datatracker.ietf.org/doc/html/rfc1945)显著扩展，支持三种方法：GET, Head 和 POST。增加了术语： 消息, 资源, 实体, 客户端, 用户代理, 服务端, 源服务器, 代理, 网关, 隧道和 缓存。

下面是在 HTTP/0.9 基础上 HTTP/1.0 做出的改进：

- 每个请求都附加 HTTP 版本。
- 状态码在响应的开头被发送。
- 请求和响应都包括 HTTP 头。
- 头部的元数据让协议更加灵活和易扩展。
- 头部的 content type 使得 http 有能力传输 HTML 文件以外的文档。

但是，HTTP/1.0 不是官方标准。

## HTTP/1.1

HTTP 第一个标准化版本 HTTP/1.1 ([RFC 2068](https://datatracker.ietf.org/doc/html/rfc2068))发布于 1997 年初，距离 HTTP/1.0 只有几个月。 HTTP/1.1 支持 7 种方法：OPTIONS, GET, HEAD, POST, PUT, DELETE 和 TRACE。2010 年[RFC 5789](https://datatracker.ietf.org/doc/html/rfc5789)增加了 PATCH,2014 年[RFC 7231](https://datatracker.ietf.org/doc/html/rfc7231) 增加了 CONNECT。

HTTP/1.1 附加的术语：representation, content negotiation, variant, cachable, first-hand, explicit expiration time, heuristic expiration time, age, freshness lifetime, fresh, stale, semantically transparent 和 validator.

HTTP/1.1 是 HTTP 1.0 的增强版：

- 虚拟主机允许多个从单个 ip 提供多个域。
- 持久化和流水线连接使得 web 浏览器可以通过单个的持久化连接发送多个请求。
- 缓存能够支持节省带宽，让响应更加快速。
- 分块传输编码可以在知道总长度之前就发送响应。这使得动态生成页面成为可能。
- 包括语言，编码或者类型在内多种方式的内容协商，使得客户端和服务端就要交换的最适合的内容达成一致。

HTTP/1.1 在接下来的 15 年左右非常稳定。在那期间，HTTPS（安全超文本传输协议）出现了。它是 HTTP 的安全版本，使用 SSL/TLS 进行安全的加密通信。

2000 年以来，web API 的真实潜力被认可。Roy Fielding 带领一组专家发明了 REST：REpresentational State Transfer。 REST 是一种软件架构风格，定义了创建 web 服务时必须遵守的一系列的约束和标准。REST API 在 HTTP/1.1 及以上生效。

## HTTP/2

HTTP/2 旨在更高效的使用网络资源，减少对延迟的感知。它引入了新的二进制分帧，该层不能向后兼容 HTTP/1.x 的服务端和客户端。

HTTP/2 的第一个草案使用 SPDY 作为规范草案的工作基础。[这个规范](https://datatracker.ietf.org/doc/html/rfc7540)于 2015 年发布。增加了术语： connection error, endpoint, frame, peer, receiver, sender, stream, stream error, intermediary, 和 payload body。

HTTP/2 在流上构建了并行化、优先级和流量控制：

- stream 是在已建立的 TCP 连接中的双向字节流，可以携带一条或多条消息。
- 通信通过具有任意数量的双向流的单个TCP连接完成。
- 这是一个多路复用协议。可以让多个并行请求在同一个连接上处理。
- 它拥有优先排序一个资源而不是另一个资源的能力,因此可以把他放在响应行头部。
- 允许未经请求就将representation从服务端推送到客户端。
- 它使用了二进制协议而不是文本。这让它可以被机器读取,性能得到提高。同时也提高了总体上的安全性。
- 请求头和响应头都是被压缩的。
- 帧在流上传输,数据帧的载荷受到流控制。

## HTTP/3

由于 TCP 保证发送和接收数据包的顺序，因此丢失的数据包将停止所有流，即使它可能只影响其中一个流。HTTP/2 没有强制加密，它容易受到流重用攻击以及压缩页面标题和 cookie 攻击。

HTTP/3可以解决下面这些问题。

HTTP/3是继HTTP/1.1 和HTTP/2后的第三大版本。目前，这仍然只是一个草案。[最新规范](https://quicwg.org/base-drafts/draft-ietf-quic-http.html)在2021年5月27日发布。它增加了术语：abort,HTTP/3 connection和content。

HTTP/3 是一种新的、快速的、可靠的、安全的协议，适用于所有形式的设备。
- HTTP/3采用了新的协议——QUIC而不是TCP，这款协议由谷歌在2013年开发。QUIC基于UDP——用户数据报协议运行，
- QUIC提供本地的多路服用，丢的包只会影响数据已经丢失的流。这解决了HTTP/2中的线端阻塞问题。
- QUIC为流数据和在流上发送的 HTTP/3帧类型提供流控制。因此所有帧的header和payload都受流控制的约束。
- 请求头和响应头都是通过QPACK压缩而不是通过HTTP/2的HPACK。
- 多个HTTP/3帧用于管理服务器推送。
- HTTP/3包括了 TLS 1.3 加密。事实上，它担任了HTTPS的角色。

## HTTP/3 支持度
HTTP/3 brings revolutionary changes to improve web performance and security. Setting up an HTTP/3 website requires both server and browser support.
HTTP/3为提升web性能和安全带来了革命性变革。建立HTTP/3 网站需要服务器和浏览器同时支持。
### 服务器支持

目前，[Google Cloud](https://cloud.google.com/), [Cloudflare](https://www.cloudflare.com/) 和[Fastly](https://www.fastly.com/)支持 HTTP/3。
### 浏览器支持
Chrome, Firefox, Edge, Opera和部分移动端浏览器支持HTTP/3。我们可以去https://caniuse.com/?search=http3 检查更新后的浏览器的支持度。绿色单元格列出了支持的浏览器版本。

![HTTP/3 browser support table by [Can I use...](https://caniuse.com/?search=http3)](https://cdn-images-1.medium.com/max/2896/1*3m1FjB_lXyS2y1kBiZ8sEg.png)

在Chrome中，HTTP/3 可以作为一个试验性协议被启用。当我们在浏览器url输入chrome://flags的时候，可以看见QUIC 默认是启用的。
![](https://cdn-images-1.medium.com/max/2000/1*KsBjkghHX0kQdeAEtjx-ow.png)

## 协议检查

请求/响应的协议可以通过NetWork标签页检查。打开谷歌开发者工具，选中Network标签。当右键点击表头的时候，协议列可以被选中而展示该列。

![](https://cdn-images-1.medium.com/max/2274/1*Km5elHxixk9Y5jhaFkRQbg.png)

根据https://w3techs.com/technologies/overview/site_element，截止到2021 年 7 月，45.7% 的网站使用 HTTP/2，20% 的网站使用 HTTP/3。
![An image generated by [W3Techs](https://w3techs.com/technologies/overview/site_element)](https://cdn-images-1.medium.com/max/2000/1*LvJFI64o1rI44tVyfNoffg.png)

### HTTP/1.1 案例
目前没有太多的公开网站仍然还在使用HTTP/1.1协议。AT&T的登录页属于其中之一。
![AT&T 登陆页](https://cdn-images-1.medium.com/max/2846/1*iJBck-4B0YoEgQigzxy8nQ.png)

### HTTP/2 案例

大部分公开网站都运行在HTTP/2,AT&T官网也是如此：
![AT&T官网](https://cdn-images-1.medium.com/max/2846/1*oQ162JFnETIOGmkc3NpghQ.png)

### HTTP/3 案例

HTTP/3的YouTube页面。

![Youtube官方页面](https://cdn-images-1.medium.com/max/2846/1*QgDSM-J_oDAyKwfKtTXQKw.png)

## 总结

我们了解了HTTP/0.9, HTTP/1.0, HTTP/1.1, HTTP/2, 和 HTTP/3. HTTP/3 使用QUIC，它基于UDP运行。这是一种新的，快速可靠的跨设备安全协议。
你正在考虑把你的应用迁移到HTTP/3服务器上？或者已经更新浏览器通过HTTP/3来查看web应用?